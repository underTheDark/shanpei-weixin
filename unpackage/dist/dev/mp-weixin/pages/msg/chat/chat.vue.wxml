<template name="0d8c75b0"><view class="_view M0d8c75b0"><view class="_view M0d8c75b0 content" bindtouchstart="handleProxy" data-eventid="{{'0d8c75b0-4'}}" data-comkey="{{$k}}"><scroll-view class="_scroll-view M0d8c75b0 msg-list" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}"><view class="_view M0d8c75b0 row" wx:key="index" key="{{index}}" id="{{'msg'+row.id}}" wx:for="{{msgList}}" wx:for-index="index" wx:for-item="row"><view class="_view M0d8c75b0 my" wx:if="{{row.uid==myuid}}"><view class="_view M0d8c75b0 left"><view wx:if="{{row.type=='text'}}" class="_view M0d8c75b0 bubble"><rich-text nodes="{{row.msg.content}}" class="_rich-text M0d8c75b0"></rich-text></view><view wx:if="{{row.type=='voice'}}" class="_view M0d8c75b0 bubble voice {{playMsgid == row.id ? 'play' : ''}}" bindtap="handleProxy" data-eventid="{{'0d8c75b0-0-'+index}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 length">{{row.msg.length}}</view><view class="_view M0d8c75b0 icon my-voice"></view></view><view wx:if="{{row.type=='img'}}" class="_view M0d8c75b0 bubble img" bindtap="handleProxy" data-eventid="{{'0d8c75b0-1-'+index}}" data-comkey="{{$k}}"><image src="{{row.msg.url}}" class="_image M0d8c75b0" style=" {{('width:' + (row.msg.w + 'px') + ';' + 'height:' + (row.msg.h + 'px') + ';')}}"></image></view></view><view class="_view M0d8c75b0 right"><image src="{{row.face}}" class="_image M0d8c75b0"></image></view></view><view class="_view M0d8c75b0 other" wx:if="{{row.uid!=myuid}}"><view class="_view M0d8c75b0 left"><image src="{{row.face}}" class="_image M0d8c75b0"></image></view><view class="_view M0d8c75b0 right"><view class="_view M0d8c75b0 username"><view class="_view M0d8c75b0 name">{{row.username}}</view><view class="_view M0d8c75b0 time">{{row.time}}</view></view><view wx:if="{{row.type=='text'}}" class="_view M0d8c75b0 bubble"><rich-text nodes="{{row.msg.content}}" class="_rich-text M0d8c75b0"></rich-text></view><view wx:if="{{row.type=='voice'}}" class="_view M0d8c75b0 bubble voice {{playMsgid == row.id ? 'play' : ''}}" bindtap="handleProxy" data-eventid="{{'0d8c75b0-2-'+index}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 icon other-voice"></view><view class="_view M0d8c75b0 length">{{row.msg.length}}</view></view><view wx:if="{{row.type=='img'}}" class="_view M0d8c75b0 bubble img" bindtap="handleProxy" data-eventid="{{'0d8c75b0-3-'+index}}" data-comkey="{{$k}}"><image src="{{row.msg.url}}" class="_image M0d8c75b0" style=" {{('width:' + (row.msg.w + 'px') + ';' + 'height:' + (row.msg.h + 'px') + ';')}}"></image></view></view></view></view></scroll-view></view><view class="_view M0d8c75b0 emoji-box {{showEmji}}" catchtouchmove="handleProxy" data-eventid="{{'0d8c75b0-6'}}" data-comkey="{{$k}}"><swiper class="_swiper M0d8c75b0 swiper" indicator-dots="true" duration="150"><swiper-item wx:key="pid" key="{{pid}}" wx:for="{{emojiList}}" wx:for-index="pid" wx:for-item="page" class="_swiper-item M0d8c75b0"><view wx:key="eid" key="{{eid}}" bindtap="handleProxy" data-eventid="{{'0d8c75b0-5-'+pid+'-'+eid}}" data-comkey="{{$k}}" wx:for="{{page}}" wx:for-index="eid" wx:for-item="em" class="_view M0d8c75b0"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}" class="_image M0d8c75b0"></image></view></swiper-item></swiper></view><view class="_view M0d8c75b0 input-box {{showEmji}}" catchtouchmove="handleProxy" data-eventid="{{'0d8c75b0-13'}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 voice"><view class="_view M0d8c75b0 icon {{isVoice ? 'jianpan' : 'yuyin'}}" bindtap="handleProxy" data-eventid="{{'0d8c75b0-7'}}" data-comkey="{{$k}}"></view></view><view class="_view M0d8c75b0 textbox"><view class="_view M0d8c75b0 voice-mode {{[isVoice ? '' : 'hidden', recording ? 'recording' : '']}}" bindtouchstart="handleProxy" catchtouchmove="handleProxy" bindtouchend="handleProxy" bindtouchcancel="handleProxy" data-eventid="{{'0d8c75b0-8'}}" data-comkey="{{$k}}">{{voiceTis}}</view><view class="_view M0d8c75b0 text-mode {{isVoice ? 'hidden' : ''}}"><view class="_view M0d8c75b0 box"><textarea auto-height="true" value="{{textMsg}}" bindinput="handleProxy" id="textMsg" data-eventid="{{'0d8c75b0-9'}}" data-comkey="{{$k}}" class="_textarea M0d8c75b0" /></view><view class="_view M0d8c75b0 em" bindtap="handleProxy" data-eventid="{{'0d8c75b0-10'}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 icon biaoqing"></view></view></view></view><view class="_view M0d8c75b0 more" bindtap="handleProxy" data-eventid="{{'0d8c75b0-11'}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 icon tupian"></view></view><label for="textMsg" class="_label M0d8c75b0"><view class="_view M0d8c75b0 send {{isVoice ? 'hidden' : ''}}" bindtap="handleProxy" data-eventid="{{'0d8c75b0-12'}}" data-comkey="{{$k}}"><view class="_view M0d8c75b0 btn">发送</view></view></label></view><view class="_view M0d8c75b0 record {{recording ? '' : 'hidden'}}"><view class="_view M0d8c75b0 ing {{willStop ? 'hidden' : ''}}"><view class="_view M0d8c75b0 icon luyin2"></view></view><view class="_view M0d8c75b0 cancel {{willStop ? '' : 'hidden'}}"><view class="_view M0d8c75b0 icon chehui"></view></view><view class="_view M0d8c75b0 tis {{willStop ? 'change' : ''}}">{{recordTis}}</view></view></view></template>