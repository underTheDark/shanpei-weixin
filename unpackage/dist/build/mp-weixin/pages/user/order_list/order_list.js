(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/order_list/order_list"],{"0177":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"custom_top"},[a("uni-nav-bar",{attrs:{fixed:"true","left-icon":"back",title:"我的订单",eventid:"a0e8c0bc-0",mpcomid:"a0e8c0bc-0"},on:{"click-left":t.goBack}})],1),a("view",{staticClass:"topTabBar"},t._l(t.orderType,function(e,s){return a("view",{key:s,staticClass:"grid",attrs:{eventid:"a0e8c0bc-1-"+s},on:{tap:function(e){t.showType(s)}}},[a("view",{staticClass:"text",class:[s==t.tabbarIndex?"on":""]},[t._v(t._s(e))])])})),a("view",{staticClass:"order-list"},[a("view",{staticClass:"list"},t._l(t.orderList,function(e,s){return a("view",{key:s,staticClass:"row",attrs:{eventid:"a0e8c0bc-10-"+s},on:{click:function(a){t.ToDetail(e.order_no)}}},[a("view",{staticClass:"type"},[a("text",{staticClass:"order-num"},[t._v("订单编号："+t._s(e.order_no))]),a("text",{staticClass:"order-status"},[t._v(t._s(0==e.status?"已取消":2==e.status?"待支付":3==e.status?"待发货":4==e.status?"待签收":5==e.status?"已签收":6==e.status?"已完成":""))])]),a("view",{staticClass:"order-list-item"},t._l(e.order_list,function(e,s){return a("view",{key:s,staticClass:"order-info"},[a("view",{staticClass:"left"},[a("image",{attrs:{src:e.goods_logo}})]),a("view",{staticClass:"right"},[a("view",{staticClass:"name"},[t._v(t._s(e.goods_title))]),a("view",{staticClass:"spec"},[t._v(t._s(e.goods_spec))]),a("view",{staticClass:"price-number"},[a("view",{staticClass:"price"},[t._v("￥"+t._s(e.price_selling))]),a("view",{staticClass:"number"},[t._v("x"+t._s(e.number))])])])])})),a("view",{staticClass:"detail"},[a("view",{staticClass:"number"},[t._v("共"+t._s(e.sum)+"件商品")]),a("view",{staticClass:"sum"},[t._v("合计￥"),a("view",{staticClass:"price"},[t._v(t._s(e.price_total))])])]),a("view",{staticClass:"btns"},[2==e.status?a("block",[a("view",{staticClass:"default",attrs:{eventid:"a0e8c0bc-2-"+s},on:{click:function(a){a.stopPropagation(),t.cancelOrder(e.order_no,s)}}},[t._v("取消订单")]),a("view",{staticClass:"pay",attrs:{eventid:"a0e8c0bc-3-"+s},on:{tap:function(a){a.stopPropagation(),t.toPayment(e.order_no,s)}}},[t._v("去付款")])]):t._e(),4==e.status?a("block",[a("view",{staticClass:"default",attrs:{eventid:"a0e8c0bc-4-"+s},on:{click:function(a){a.stopPropagation(),t.viewSend(e.order_no,e)}}},[t._v("查看物流")])]):t._e(),5==e.status?a("block",[a("view",{staticClass:"default",attrs:{eventid:"a0e8c0bc-5-"+s},on:{click:function(a){a.stopPropagation(),t.viewSend(e.order_no,e)}}},[t._v("查看物流")]),a("view",{staticClass:"default",attrs:{eventid:"a0e8c0bc-6-"+s},on:{click:function(a){a.stopPropagation(),t.service(e)}}},[t._v("申请售后")]),a("view",{staticClass:"pay",attrs:{eventid:"a0e8c0bc-7-"+s},on:{click:function(a){a.stopPropagation(),t.confirm(e.order_no,e)}}},[t._v("确认收货")])]):t._e(),6==e.status&&0==e.is_coment?a("block",[a("view",{staticClass:"pay",attrs:{eventid:"a0e8c0bc-8-"+s},on:{click:function(a){a.stopPropagation(),t.evalute(e)}}},[t._v("去评价")])]):t._e(),0==e.status?a("block",[a("view",{staticClass:"default",attrs:{eventid:"a0e8c0bc-9-"+s},on:{click:function(a){a.stopPropagation(),t.deleteOrder(e.order_no,s)}}},[t._v("删除订单")])]):t._e()],1)])}))]),t.show_menu?a("view",{staticClass:"picker_li"},[a("view",{staticClass:"pickbg"}),a("view",{staticClass:"btn_c"},[a("view",{staticClass:"qx",attrs:{eventid:"a0e8c0bc-11"},on:{tap:t.cancel}},[t._v("取消")]),a("view",{staticClass:"sign",attrs:{disabled:t.isdisabled,eventid:"a0e8c0bc-12"},on:{tap:t.sure}},[t._v("确定")])]),a("view",{staticClass:"picker_w"},[a("view",{staticClass:"return-title"},[t._v("请选择退货原因")]),a("view",{staticClass:"li_four"},t._l(t.array,function(e,s){return a("view",{key:s,staticClass:"li_i",class:[t.style4==e.id?"active":""],attrs:{eventid:"a0e8c0bc-13-"+s},on:{tap:function(a){t.showcityfour(e.id,e.name)}}},[t._v(t._s(e.name))])}))])]):t._e(),a("uni-load-more",{attrs:{status:t.status,mpcomid:"a0e8c0bc-1"}})],1)},i=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})},"0b66":function(t,e,a){},1206:function(t,e,a){"use strict";var s=a("2f05"),i=a.n(s);i.a},"1b51":function(t,e,a){"use strict";var s=a("746c"),i=a.n(s);i.a},"1c94":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("34fd")),i=n(a("ec1e"));function n(t){return t&&t.__esModule?t:{default:t}}var o={components:{uniNavBar:i.default,uniLoadMore:s.default},data:function(){return{height:"",style4:"",desc:"",num:"",order:"",show_menu:!1,ishow:!1,selceted:"",headerPosition:"fixed",headerTop:"0px",typeText:{unpaid:"等待付款",back:"等待商家发货",unreceived:"商家已发货",received:"等待用户评价",completed:"交易已完成",refunds:"商品退货处理中",cancelled:"订单已取消"},orderType:["全部","待付款","待发货","待收货","已完成"],orderList:[],list:[],tabbarIndex:0,array:[{id:0,name:"我不想买了"},{id:1,name:"信息填写错误"},{id:2,name:"重新拍"},{id:3,name:"卖家缺货"},{id:4,name:"其他原因"}],current_page:1,last_page:"",status:"more"}},onReachBottom:function(){this.current_page++,this.current_page>this.last_page||this.requestOrder(this.current_page)},onLoad:function(t){var e=parseInt(t.tbIndex)+1;this.tabbarIndex=e},onShow:function(){this.current_page=1,this.orderList=[],this.requestOrder(this.current_page)},onPageScroll:function(t){},methods:{goBack:function(){t.switchTab({url:"/pages/tabBar/user"})},requestOrder:function(t){var e=this;this.request({url:this.config.url+"member/order",method:"post",data:{token:this.token,type:this.tabbarIndex,page:t},success:function(t){1==t.data.code&&(e.last_page=t.data.data.last_page,e.orderList=e.orderList.concat(t.data.data.data),e.status="more",e.current_page>=e.last_page&&(e.status="noMore"),e.orderList.forEach(function(t,e){var a=0;t.order_list.forEach(function(t){a+=t.number}),t.sum=a}))}})},showcityfour:function(t,e){this.style4=t,this.desc=e},ToDetail:function(e){t.navigateTo({url:"../../detail/detail?id="+e})},showType:function(t){var e=this;this.request({url:this.config.url+"member/order",method:"post",data:{token:this.token,type:t},success:function(t){console.log("moun",t),1==t.data.code&&(e.orderList=t.data.data.data,e.orderList.forEach(function(t,e){var a=0;t.order_list.forEach(function(t){a+=t.number}),t.sum=a}))}}),this.tabbarIndex=t,this.list=this.orderList[t]},toPayment:function(e,a){var s=this;this.request({url:this.config.url+"order/pay",method:"POST",data:{token:this.token,order_no:e},success:function(e){if(console.log(e),1==e.data.code){var i=e.data.data.data;t.requestPayment({provider:"wxpay",appid:i.appId,timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(e){console.log("success:"+JSON.stringify(e)),s.orderList.splice(a,1),t.showToast({title:"支付成功"})},fail:function(e){console.log("fail:"+JSON.stringify(e)),t.showToast({title:"支付失败"})}})}else t.showToast({title:e.data.info})}})},cancelOrder:function(t,e){console.log(t,e),this.show_menu=!0,this.num=e,this.order=t},cancel:function(){this.show_menu=!1},sure:function(){var e=this;this.desc?(this.show_menu=!1,this.request({url:this.config.url+"order/cancle",method:"POST",data:{token:this.token,order_no:this.order,cancle_desc:this.desc},success:function(a){console.log(a),e.orderList.splice(e.index,1),1==a.data.code?t.showToast({title:"取消订单成功"}):t.showToast({title:"取消订单失败"})}})):t.showToast({title:"请选择退货原因",icon:"none"}),console.log(order,index),this.ishow=!0},confirm:function(e,a){this.request({url:this.config.url+"order/confirm",method:"POST",data:{token:this.token,order_no:e},success:function(e){if(1==e.data.code){var s=JSON.stringify(a);console.log("确认收货",e),t.navigateTo({url:"/pages/confirm/confirm?con="+s})}else t.showToast({title:e.data.info})}})},viewSend:function(e,a){this.request({url:this.config.url+"order/express",method:"POST",data:{order_no:e},success:function(e){if(console.log(e),1==e.data.code){var s=JSON.stringify(a),i=JSON.stringify(e.data.data);t.navigateTo({url:"/pages/viewsend/viewsend?info="+i+"&goods="+s})}else t.showToast({title:e.data.info})}})},service:function(e){t.navigateTo({url:"/pages/serType/serType"}),t.setStorage({key:"regoods",data:e,success:function(){console.log("保存换货数据成功")}})},deleteOrder:function(e,a){var s=this;this.request({url:this.config.url+"order/del",method:"POST",data:{token:this.token,order_no:e},success:function(e){console.log(e),s.orderList.splice(a,1),1==e.data.code&&t.showToast({title:"删除订单成功"})}})},evalute:function(e){console.log("item",e);var a=JSON.stringify(e);t.navigateTo({url:"/pages/user/keep/sayFeel/sayFeel?eval="+a})}}};e.default=o}).call(this,a("543d")["default"])},"2f05":function(t,e,a){},"48b4":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-status-bar",style:t.style},[t._t("default",null,{mpcomid:"5b7cbbc2-0"})],2)},i=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})},"4b16":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-navbar",class:{"uni-navbar-fixed":t.isFixed,"uni-navbar-shadow":t.hasShadow},style:{"background-color":t.backgroundColor}},[t.insertStatusBar?a("uni-status-bar",{attrs:{mpcomid:"a3482f88-0"}}):t._e(),a("view",{staticClass:"uni-navbar-header",style:{color:t.color}},[a("view",{staticClass:"uni-navbar-header-btns",attrs:{eventid:"a3482f88-0"},on:{tap:t.onClickLeft}},[t.leftIcon.length?a("view",[a("uni-icon",{attrs:{type:t.leftIcon,color:t.color,size:"24",mpcomid:"a3482f88-1"}})],1):t._e(),t.leftText.length?a("view",{staticClass:"uni-navbar-btn-text",class:{"uni-navbar-btn-icon-left":!t.leftIcon.length}},[t._v(t._s(t.leftText))]):t._e(),t._t("left",null,{mpcomid:"a3482f88-2"})],2),a("view",{staticClass:"uni-navbar-container"},[t.title.length?a("view",{staticClass:"uni-navbar-container-title"},[t._v(t._s(t.title))]):t._e(),t._t("default",null,{mpcomid:"a3482f88-3"})],2),a("view",{staticClass:"uni-navbar-header-btns",attrs:{eventid:"a3482f88-1"},on:{tap:t.onClickRight}},[t.rightIcon.length?a("view",[a("uni-icon",{attrs:{type:t.rightIcon,color:t.color,size:"24",mpcomid:"a3482f88-4"}})],1):t._e(),t.rightText.length&&!t.rightIcon.length?a("view",{staticClass:"uni-navbar-btn-text"},[t._v(t._s(t.rightText))]):t._e(),t._t("right",null,{mpcomid:"a3482f88-5"})],2)])],1)},i=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})},"4c84":function(t,e,a){"use strict";var s=a("0b66"),i=a.n(s);i.a},"4f87":function(t,e,a){"use strict";a("d23f");var s=n(a("b0ce")),i=n(a("609f"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},"5fc2":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={computed:{style:function(){var e=t.getSystemInfoSync();return"height:".concat(e.statusBarHeight,"px")}}};e.default=a}).call(this,a("543d")["default"])},"609f":function(t,e,a){"use strict";a.r(e);var s=a("0177"),i=a("fbef");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("1206");var o=a("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"746c":function(t,e,a){},"7b51":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("b797")),i=n(a("27e2"));function n(t){return t&&t.__esModule?t:{default:t}}var o={components:{uniStatusBar:s.default,uniIcon:i.default},props:{title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#FFFFFF"},statusBar:{type:[Boolean,String],default:""},shadow:{type:String,default:""}},computed:{isFixed:function(){return"true"===String(this.fixed)},insertStatusBar:function(){switch(String(this.statusBar)){case"true":return!0;case"false":return!1;default:return this.isFixed}},hasShadow:function(){var t=this.backgroundColor;switch(String(this.shadow)){case"true":return!0;case"false":return!1;default:return"transparent"!==t&&t.indexOf("rgba")<0}}},methods:{onClickLeft:function(){this.$emit("clickLeft"),this.$emit("click-left")},onClickRight:function(){this.$emit("clickRight"),this.$emit("click-right")}}};e.default=o},"7c18":function(t,e,a){"use strict";a.r(e);var s=a("7b51"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a},b797:function(t,e,a){"use strict";a.r(e);var s=a("48b4"),i=a("d342");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("4c84");var o=a("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},d342:function(t,e,a){"use strict";a.r(e);var s=a("5fc2"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a},ec1e:function(t,e,a){"use strict";a.r(e);var s=a("4b16"),i=a("7c18");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("1b51");var o=a("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},fbef:function(t,e,a){"use strict";a.r(e);var s=a("1c94"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a}},[["4f87","common/runtime","common/vendor"]]]);