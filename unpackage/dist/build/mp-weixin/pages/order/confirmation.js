(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirmation"],{"2a92":function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("view",{staticClass:"confirm"},[s("view",{staticClass:"send"},[s("view",{staticClass:"send-title"},[t._v("配送方式")]),s("view",{staticClass:"send-type",attrs:{eventid:"7c20012d-0"},on:{click:function(a){t.sendType()}}},[s("text",[t._v("已选")]),s("text",[t._v(t._s(1==t.getgoods_name?"自提":"送货上门"))]),s("image",{staticClass:"right-jiantou",attrs:{src:"../../static/img/category/youce-jiantou.png"}})])]),s("view",{staticClass:"addr"},[s("view",{staticClass:"sendgoods-info"},[t._v("配送信息")]),s("view",{staticClass:"sendgoods-addr"},[s("view",[s("text",{directives:[{name:"show",rawName:"v-show",value:1==t.getgoods_name,expression:"getgoods_name==1"}],staticClass:"getgoods-name"},[t._v(t._s(t.addrList.name))]),s("text",{staticClass:"getgoods-people"},[t._v(t._s(t.addrList.username)+"    "+t._s(t.addrList.phone))]),s("text",{staticClass:"getgoods-addr"},[t._v(t._s(t.addrList.province_name)+t._s(t.addrList.city_name)+t._s(t.addrList.area_name)+" "+t._s(t.addrList.street_name)+"\n\t\t\t\t\t\t"+t._s(t.addrList.province)+t._s(t.addrList.city)+t._s(t.addrList.area)+t._s(t.addrList.street)+t._s(t.addrList.address))])])])]),s("view",{staticClass:"buy-list"},[t._l(t.buyList,function(a,e){return s("view",{key:e,staticClass:"row"},[s("view",{staticClass:"goods-info"},[s("view",{staticClass:"img"},[s("image",{attrs:{src:a.goods_logo}})]),s("view",{staticClass:"info"},[s("view",{staticClass:"title"},[t._v(t._s(a.goods_title))]),s("view",{staticClass:"spec"},[s("text",[t._v(t._s(a.goods_spec))])]),s("view",{staticClass:"price-number"},[s("view",{staticClass:"price"},[t._v("￥"+t._s(a.price_selling))]),s("view",{staticClass:"number"},[t._v("x"+t._s(a.goods_number))])])])])])}),s("view",{staticClass:"total-money"},[s("view",{staticClass:"send-money"},[s("text",[t._v("配送费")]),s("text",[t._v("￥"+t._s(t.express))])]),s("view",{staticClass:"total-pay-money"},[s("text",[t._v("共"+t._s(t.number)+"件商品")]),s("view",{staticClass:"pay-money"},[s("text",[t._v("合计：")]),s("text",[t._v("￥"+t._s(t.total))])])])])],2),s("view",{staticClass:"footer"},[s("view",{staticClass:"settlement"},[s("view",{staticClass:"sum"},[t._v("待支付:"),s("view",{staticClass:"money"},[t._v("￥"+t._s(t.totalmoney))])]),s("view",{staticClass:"btn",attrs:{eventid:"7c20012d-1"},on:{tap:t.toPay}},[t._v("去结算")])])])])},o=[];s.d(a,"a",function(){return e}),s.d(a,"b",function(){return o})},"42ba":function(t,a,s){"use strict";var e=s("e514"),o=s.n(e);o.a},b5eb:function(t,a,s){"use strict";s.r(a);var e=s("cf8f"),o=s.n(e);for(var d in e)"default"!==d&&function(t){s.d(a,t,function(){return e[t]})}(d);a["default"]=o.a},cf8f:function(t,a,s){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s={mounted:function(){},computed:{totalmoney:function(){var t=Number(this.total)+Number(this.express);return t}},data:function(){return{buyList:[],goodsinfo:{},number:"",goodsPrice:0,sumPrice:0,address:9,addrList:{},goods:[],express:"",total:"",iscart:"",getgoods_name:!1,order_no:"",orderType:"",defaultAddr:"",addrId:""}},onLoad:function(a){var s=this;console.log("con",a),a.iscart?t.getStorage({key:"cart",success:function(t){if(console.log("liji",t),s.iscart=t.data.isCart,0==t.data.isCart){var a={goods_id:t.data.goods.id,goods_number:t.data.goods.goods_number,goods_spec:t.data.goods.goods_spec};s.goods.push(a),s.request({url:s.config.url+"order/sure",method:"post",data:{token:s.token,goods:s.goods},success:function(t){console.log("sure",t),1==t.data.code&&(s.buyList=t.data.data.goods,s.express=t.data.data.express,s.total=t.data.data.total,s.number=t.data.data.number,s.orderType=t.data.data.order_type,0==s.orderType?s.address=!1:1==s.orderType?(s.getgoods_name=1,s.address=!0,s.addrList=t.data.data.address,s.addrId=t.data.data.address.id):2==s.orderType&&(s.getgoods_name=2,s.address=!0,s.addrList=t.data.data.address,s.addrId=t.data.data.address.id))}})}else s.goods=t.data.goods,s.request({url:s.config.url+"order/sure",method:"post",data:{token:s.token,goods:s.goods},success:function(t){console.log("cart",t),1==t.data.code&&(s.buyList=t.data.data.goods,s.express=t.data.data.express,s.total=t.data.data.total,s.number=t.data.data.number,s.orderType=t.data.data.order_type,0==s.orderType?s.address=!1:1==s.orderType?(s.getgoods_name=1,s.address=!0,s.addrList=t.data.data.address,s.addrId=t.data.data.address.id):2==s.orderType&&(s.getgoods_name=2,s.address=!0,s.addrList=t.data.data.address,s.addrId=t.data.data.address.id))}})}}):(t.getStorage({key:"address",success:function(t){var a=JSON.parse(t.data);console.log("address",t,a),a.distance?(s.addrId=a.id,s.getgoods_name=1,s.addrList=a):(s.addrId=a.id,s.addrList=a,s.getgoods_name=2)}}),t.getStorage({key:"cart",success:function(t){if(console.log("liji",t),s.iscart=t.data.isCart,0==t.data.isCart){var a={goods_id:t.data.goods.id,goods_number:t.data.goods.goods_number,goods_spec:t.data.goods.goods_spec};s.goods.push(a),s.request({url:s.config.url+"order/sure",method:"post",data:{token:s.token,goods:s.goods},success:function(t){console.log("sure",t),1==t.data.code&&(s.buyList=t.data.data.goods,s.express=t.data.data.express,s.total=t.data.data.total,s.number=t.data.data.number)}})}else s.goods=t.data.goods,s.request({url:s.config.url+"order/sure",method:"post",data:{token:s.token,goods:s.goods},success:function(t){console.log("cart",t),1==t.data.code&&(s.buyList=t.data.data.goods,s.express=t.data.data.express,s.total=t.data.data.total,s.number=t.data.data.number)}})}}))},filters:{toFixed:function(t){return parseFloat(t).toFixed(2)}},methods:{sendType:function(){t.navigateTo({url:"/pages/sendType/sendType"})},clearOrder:function(){var a=this;t.removeStorage({key:"buylist",success:function(t){a.buylist=[]}})},toPay:function(){var a=this;this.request({url:this.config.url+"order/order",method:"post",data:{token:this.token,goods:this.goods,order_type:this.getgoods_name,address_id:this.addrId,from_car:this.iscart},success:function(s){console.log(s),1==s.data.code?(a.order_no=s.data.data.order_no,a.request({url:a.config.url+"order/pay",method:"POST",data:{token:a.token,order_no:a.order_no},success:function(a){if(console.log(a),1==a.data.code){var s=a.data.data.data;t.requestPayment({provider:"wxpay",appid:s.appId,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign,success:function(a){console.log("success:"+JSON.stringify(a)),t.navigateTo({url:"/pages/user/order_list/order_list?tbIndex=1"})},fail:function(a){console.log("fail:"+JSON.stringify(a)),t.switchTab({url:"/pages/tabBar/home"}),t.showToast({title:"支付失败"})}})}else t.showToast({title:a.data.info,duration:1e3})}})):0==s.data.code&&t.showToast({title:s.data.info,duration:1e3})}})}}};a.default=s}).call(this,s("543d")["default"])},e514:function(t,a,s){},fb49:function(t,a,s){"use strict";s("d23f");var e=d(s("b0ce")),o=d(s("ff65"));function d(t){return t&&t.__esModule?t:{default:t}}Page((0,e.default)(o.default))},ff65:function(t,a,s){"use strict";s.r(a);var e=s("2a92"),o=s("b5eb");for(var d in o)"default"!==d&&function(t){s.d(a,t,function(){return o[t]})}(d);s("42ba");var r=s("2877"),i=Object(r["a"])(o["default"],e["a"],e["b"],!1,null,null,null);a["default"]=i.exports}},[["fb49","common/runtime","common/vendor"]]]);