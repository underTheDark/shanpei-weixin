(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/home"],{"173a":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(e("0185"));function n(t){return t&&t.__esModule?t:{default:t}}var i=function(){return e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"34fd"))},s={components:{uniLoadMore:i},mounted:function(){var a=this;this.init(),t.hideLoading(),this.request({url:this.config.url+"member/message",method:"POST",data:{token:this.token},success:function(t){console.log(t," at pages\\tabBar\\home.vue:163"),1==t.data.code&&(a.msgList=t.data.data.data)}})},data:function(){return{msg:"",msgList:[],showIcon:!1,status:"more",afterHeaderOpacity:1,headerPosition:"fixed",headerTop:null,statusTop:null,city:"北京",currentSwiper:0,swiperList:[],categoryList:[],Promotion:[],hotList:[],limitList:[],productList:[],totalList:[],loadingText:"正在加载...",token1:"",current_page:1,total:"",last_page:"1",tishi:!1,hot:[],limit:[],home:!1}},onPageScroll:function(t){this.headerPosition=t.scrollTop>=0?"fixed":"absolute",this.headerTop=t.scrollTop>=0?null:0,this.statusTop=t.scrollTop>=0?null:-this.statusHeight+"px"},onPullDownRefresh:function(){setTimeout(function(){t.stopPullDownRefresh()},1e3)},onReachBottom:function(){this.current_page++,this.current_page>this.last_page||this.getRecommendList()},onReady:function(){},onLoad:function(){var a=this;this.getRecommendList(),t.showLoading({title:"加载中"}),t.getStorage({key:"info",success:function(t){var e=JSON.parse(t.data);a.token1=e.token,a.first_load()}})},methods:{moreLoad:function(){t.navigateTo({url:"/pages/goods/goods-list?hot=hot"})},moreLimit:function(){t.navigateTo({url:"/pages/goods/goods-list?limit=limit"})},init:function(){t.hideLoading()},first_load:function(){var t=this,a=new o.default.AMapWX({key:"5b9b64be2413fc19c26683fcf0de890f"});a.getRegeo({success:function(a){t.city=a[0].regeocodeData.addressComponent.city.replace(/市/g,""),t.init()}}),this.request({url:this.config.url+"member/message",method:"POST",data:{token:this.token1},success:function(a){1==a.data.code&&(t.msgList=a.data.data.data,a.data.data.data.length>0&&(t.msg=!0))}}),this.request({url:this.config.url+"home",data:{},method:"post",success:function(a){var e,o;if(console.log("home",a," at pages\\tabBar\\home.vue:318"),1==a.data.code){console.log(a," at pages\\tabBar\\home.vue:321"),t.swiperList=a.data.data.banner,t.categoryList=a.data.data.cate,t.limit=a.data.data.limit_buy,t.hot=a.data.data.hot,t.home=!0,o=t.limit.length<4?t.limit.length:4;for(var n=0;n<o;n++)t.limitList.push(t.limit[n]);e=t.hot.length<6?t.hot.length:6;for(n=0;n<e;n++)t.hotList.push(t.hot[n])}}})},getRecommendList:function(){var t=this;this.status="loading",this.request({url:this.config.url+"recommend",data:{token:this.token1,page:this.current_page},method:"post",success:function(a){var e;console.log("res.data",a.data," at pages\\tabBar\\home.vue:370"),t.totalList=a.data.data.data;var o=a.data.data.current_page;if(1==o){e=t.totalList.length<10?t.totalList.length:10;for(var n=0;n<e;n++)t.productList.push(t.totalList[n])}else t.productList.concat(a.data.data.data);t.last_page=a.data.data.last_page,t.total=a.data.data.data.total,t.status="more",t.current_page>=t.last_page&&(t.status="noMore")}})},toMsg:function(){t.navigateTo({url:"/pages/msg/msg"})},toSearch:function(){t.navigateTo({url:"/pages/search/search?"})},toSwiper:function(t,a){},toCategory:function(a){console.log(a," at pages\\tabBar\\home.vue:423"),t.navigateTo({url:"/pages/goods/goods-list?id="+a.id+"&title="+a.title})},skipGetgoods:function(){t.navigateTo({url:"/pages/getgoods/getgoods"})},toGoods:function(a){t.navigateTo({url:"/pages/goods/goods?id="+a.id})},swiperChange:function(t){this.currentSwiper=t.detail.current}}};a.default=s}).call(this,e("6e42")["default"])},2376:function(t,a,e){},"3e14":function(t,a,e){"use strict";var o=e("2376"),n=e.n(o);n.a},"412d":function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement;t._self._c},n=[];e.d(a,"a",function(){return o}),e.d(a,"b",function(){return n})},a4f5:function(t,a,e){"use strict";e.r(a);var o=e("173a"),n=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(a,t,function(){return o[t]})}(i);a["default"]=n.a},fbec:function(t,a,e){"use strict";e.r(a);var o=e("412d"),n=e("a4f5");for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);e("3e14");var s=e("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);a["default"]=r.exports}},[["0aad","common/runtime","common/vendor"]]]);