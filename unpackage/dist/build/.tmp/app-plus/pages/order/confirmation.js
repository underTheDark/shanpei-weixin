(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/confirmation"],{"580e":function(o,e,t){"use strict";t.r(e);var a=t("6ee6"),r=t.n(a);for(var s in a)"default"!==s&&function(o){t.d(e,o,function(){return a[o]})}(s);e["default"]=r.a},"61e9":function(o,e,t){},"6ee6":function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={mounted:function(){var e=this;o.getStorage({key:"address",success:function(o){var t=JSON.parse(o.data);console.log("address",o,t," at pages\\order\\confirmation.vue:89"),t.distance?(console.log(2," at pages\\order\\confirmation.vue:91"),console.log(t.distance," at pages\\order\\confirmation.vue:92"),e.getgoods_name=1):(console.log(1," at pages\\order\\confirmation.vue:95"),e.addrList=t,e.getgoods_name=2)}})},computed:{totalmoney:function(){var o=Number(this.total)+Number(this.express);return o}},data:function(){return{buyList:[],goodsinfo:{},number:"",goodsPrice:0,sumPrice:0,address:9,addrList:{},goods:[],express:"",total:"",iscart:"",getgoods_name:!1,order_no:""}},onLoad:function(e){var t=this;console.log(e," at pages\\order\\confirmation.vue:131"),o.getStorage({key:"cart",success:function(e){if(console.log("liji",e," at pages\\order\\confirmation.vue:136"),t.iscart=e.data.isCart,0==e.data.isCart){var a={goods_id:e.data.goods.id,goods_number:e.data.goods.goods_number,goods_spec:e.data.goods.goods_spec};t.goods.push(a),o.request({url:t.config.url+"order/sure",method:"post",data:{token:t.token,goods:t.goods},success:function(o){1==o.data.code&&(t.buyList=o.data.data.goods,t.express=o.data.data.express,t.total=o.data.data.total,t.number=o.data.data.number)}})}else t.goods=e.data.goods,o.request({url:t.config.url+"order/sure",method:"post",data:{token:t.token,goods:t.goods},success:function(o){console.log("cart",o," at pages\\order\\confirmation.vue:177"),1==o.data.code&&(t.buyList=o.data.data.goods,t.express=o.data.data.express,t.total=o.data.data.total,t.number=o.data.data.number)}})}})},onBackPress:function(){this.clearOrder()},filters:{toFixed:function(o){return parseFloat(o).toFixed(2)}},methods:{sendType:function(){o.navigateTo({url:"/pages/sendType/sendType"})},clearOrder:function(){var e=this;o.removeStorage({key:"buylist",success:function(o){e.buylist=[]}})},toPay:function(){var e=this;o.request({url:this.config.url+"order/order",method:"post",data:{token:this.token,goods:this.goods,order_type:this.getgoods_name,address_id:this.addrList.id,from_car:this.iscart},success:function(t){console.log(t," at pages\\order\\confirmation.vue:236"),1==t.data.code?(e.order_no=t.data.data.order_no,o.request({url:e.config.url+"order/pay",method:"POST",data:{token:e.token,order_no:e.order_no},success:function(e){if(console.log(e," at pages\\order\\confirmation.vue:249"),1==e.data.code){var t=e.data.data.data;o.requestPayment({provider:"wxpay",appid:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign,success:function(e){console.log("success:"+JSON.stringify(e)," at pages\\order\\confirmation.vue:261"),o.navigateTo({url:"/pages/user/order_list/order_list?tbIndex=2"})},fail:function(e){console.log("fail:"+JSON.stringify(e)," at pages\\order\\confirmation.vue:268"),o.switchTab({url:"/pages/tabBar/home"}),o.showToast({title:"支付失败"})}})}}})):0==t.data.code&&o.showToast({title:"提交订单失败",duration:1e3})}})}}};e.default=t}).call(this,t("6e42")["default"])},"771b":function(o,e,t){"use strict";var a=function(){var o=this,e=o.$createElement;o._self._c},r=[];t.d(e,"a",function(){return a}),t.d(e,"b",function(){return r})},c6a1:function(o,e,t){"use strict";var a=t("61e9"),r=t.n(a);r.a},fbbf:function(o,e,t){"use strict";t.r(e);var a=t("771b"),r=t("580e");for(var s in r)"default"!==s&&function(o){t.d(e,o,function(){return r[o]})}(s);t("c6a1");var n=t("2877"),d=Object(n["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=d.exports}},[["4793","common/runtime","common/vendor"]]]);