(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"059f":function(t,o,e){"use strict";var s=e("0ef1"),a=e.n(s);a.a},"0ef1":function(t,o,e){},"2e87":function(t,o,e){"use strict";e.r(o);var s=e("f195"),a=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(o,t,function(){return s[t]})}(n);o["default"]=a.a},3474:function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},a=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return a})},"6bc3":function(t,o,e){"use strict";e.r(o);var s=e("3474"),a=e("2e87");for(var n in a)"default"!==n&&function(t){e.d(o,t,function(){return a[t]})}(n);e("059f");var i=e("2877"),c=Object(i["a"])(a["default"],s["a"],s["b"],!1,null,null,null);o["default"]=c.exports},f195:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=function(){return e.e("components/uni-number-box/uni-number-box").then(e.bind(null,"a800"))},a=function(){return e.e("components/uni-rate/uni-rate").then(e.bind(null,"435c"))},n=function(){return e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"32fc"))},i={components:{uniNumberBox:s,uniRate:a,uniLoadMore:n},data:function(){return{beforeHeaderzIndex:11,afterHeaderzIndex:10,beforeHeaderOpacity:1,afterHeaderOpacity:0,id:"",proNum:1,showBack:!0,evaImg:[],tuiList:[],guiList:[],swiperList:[],currentSwiper:0,anchorlist:[],selectAnchor:0,serviceClass:"",specClass:"",shareClass:"",goodsData:{},selectSpec:null,isKeep:!1,detail:"",goodsDetail:{},comment:[],goods_list:[],size_list:[],selected_size:"",totalList:[],loadingText:"正在加载...",showIcon:!1,status:"more",current_page:0,total:"",last_page:"1"}},onLoad:function(t){console.log(t," at pages\\goods\\goods.vue:329"),this.id=t.id,this.goodsDetail=t},onReady:function(){this.calcAnchor()},onPageScroll:function(t){this.selectAnchor=t.scrollTop>=this.anchorlist[2].top?2:t.scrollTop>=this.anchorlist[1].top?1:0;var o=375;t.scrollTop=t.scrollTop>o?375:t.scrollTop,this.afterHeaderOpacity=t.scrollTop*(1/o),this.beforeHeaderOpacity=1-this.afterHeaderOpacity,this.beforeHeaderzIndex=t.scrollTop>0?10:11,this.afterHeaderzIndex=t.scrollTop>0?11:10},onReachBottom:function(){this.current_page<this.last_page&&this.getRecommendList()},mounted:function(){var o=this;t.request({url:this.config.url+"goods/detail",data:{token:this.token,id:this.id},method:"post",success:function(t){console.log("goods",t,t.data.data.goods_list," at pages\\goods\\goods.vue:366"),1==t.data.code&&(o.goodsData=t.data.data,o.comment=o.goodsData.comment,o.isKeep=o.goodsData.is_collect,o.guiList=o.goodsData.specs,o.swiperList=t.data.data.image.split("|"),console.log(o.swiperList," at pages\\goods\\goods.vue:375"),o.detail=t.data.data.content,console.log(o.detail," at pages\\goods\\goods.vue:378"),o.goods_list=t.data.data.goods_list)}})},methods:{bindChange:function(t){this.proNum=t},addTitle:function(t){console.log(t," at pages\\goods\\goods.vue:425")},addColor:function(t,o,e,s){var a=this;if(o.length>0){o.forEach(function(t){t.checked=!1}),e.checked=!0,this.$forceUpdate();var n=t.name+":"+e.name;t.checked=n;var i="";this.guiList.forEach(function(t){i+=";"+t.checked}),i=i.substr(1),console.log("all_check",i," at pages\\goods\\goods.vue:444"),this.goods_list.forEach(function(t){t.goods_spec==i&&(a.goodsData.price=t.price_selling,a.goodsData.number_stock=t.number_stock,a.selected_size=t.goods_spec)})}},getRecommendList:function(){var o=this;this.status="loading",t.request({url:this.config.url+"recommend",data:{token:this.token,page:Number(this.current_page)+1},method:"post",success:function(t){var e;o.totalList=t.data.data.data,e=o.totalList.length<10?o.totalList.length:10;for(var s=0;s<e;s++)o.tuiList.push(o.totalList[s]);o.current_page=t.data.data.current_page,o.last_page=t.data.data.last_page,o.total=t.data.data.data.total,o.status="more",o.current_page>=o.last_page&&(o.status="noMore")}})},cancel:function(){this.selected_size&&-1==this.selected_size.indexOf("undefined")?t.request({url:this.config.url+"goods/car",method:"post",data:{token:this.token,goods_id:this.id,goods_spec:this.selected_size,number:this.proNum},success:function(o){console.log("data",o," at pages\\goods\\goods.vue:510"),1==o.data.code?t.showToast({title:"加入成功",icon:"none"}):t.showToast({title:o.data.info,icon:"none"})}}):t.showToast({title:"请选中完整规格",icon:"none"})},gotui:function(o){t.navigateTo({url:"/pages/goods/goods?id="+o})},skipCart:function(){t.switchTab({url:"/pages/tabBar/cart"})},swiperChange:function(t){this.currentSwiper=t.detail.current},toMsg:function(){t.navigateTo({url:"../msg/msg"})},toChat:function(){t.navigateTo({url:"../msg/chat/chat?name=客服008"})},share:function(){this.shareClass="show"},hideShare:function(){var t=this;this.shareClass="hide",setTimeout(function(){t.shareClass="none"},150)},keep:function(){this.isKeep=!this.isKeep,t.request({url:this.config.url+"goods/collect",data:{token:this.token,goods_id:this.id},method:"post",success:function(t){console.log(t," at pages\\goods\\goods.vue:580")}})},joinCart:function(){if(null==this.selectSpec)return this.showSpec(function(){t.showToast({title:"已加入购物车"})});t.showToast({title:"已加入购物车"})},buy:function(){if(this.selected_size&&-1==this.selected_size.indexOf("undefined")){var o=JSON.stringify(this.goodsDetail);o=this.goodsData,o.goods_spec=this.selected_size,o.goods_number=this.proNum;var e={isCart:0};e.goods=o,t.setStorage({key:"cart",data:e,success:function(){}}),t.navigateTo({url:"/pages/order/confirmation?iscart=1"})}else t.showToast({title:"请选择完整规格",icon:"none"})},toConfirmation:function(){},toRatings:function(){t.navigateTo({url:"ratings/ratings"})},showComments:function(t){},setSelectSpec:function(t){this.selectSpec=t},sub:function(){this.goodsData.number<=1||this.goodsData.number--},add:function(){this.goodsData.number++},toAnchor:function(o){this.selectAnchor=o,t.pageScrollTo({scrollTop:this.anchorlist[o].top,duration:200})},calcAnchor:function(){var o=this;this.anchorlist=[{name:"主图",top:0},{name:"评价",top:0},{name:"详情",top:0}];var e=t.createSelectorQuery().select("#comments");e.boundingClientRect(function(e){var s=0;s=plus.navigator.getStatusbarHeight();var a=t.upx2px(100);o.anchorlist[1].top=e.top-a-s,o.anchorlist[2].top=e.bottom-a-s}).exec()},back:function(){t.navigateBack(1)},showService:function(){console.log("show"," at pages\\goods\\goods.vue:719"),this.serviceClass="show"},hideService:function(){var t=this;this.serviceClass="hide",setTimeout(function(){t.serviceClass="none"},200)},showSpec:function(t){console.log("show"," at pages\\goods\\goods.vue:731"),this.specClass="show",this.specCallback=t},specCallback:function(){},hideSpec:function(){var t=this;this.specClass="hide",this.selectSpec&&this.specCallback&&this.specCallback(),this.specCallback=!1,setTimeout(function(){t.specClass="none"},200)},discard:function(){}}};o.default=i}).call(this,e("6e42")["default"])}},[["ef22","common/runtime","common/vendor"]]]);